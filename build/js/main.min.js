$(function(){"use strict";$('[data-toggle="tooltip"]').tooltip()}),function(){"use strict";$.views.settings.delimiters("<%","%>");var e=$("[data-type=chosen]");e.chosen({allow_single_deselect:!0,display_disabled_options:!1}),$(".chosen-results").mouseenter(function(){$(this).find(".group-result").click(function(){var t=$(this),n=t.nextUntil(".group-result"),a=t.closest(".chosen-container-multi").prev().find("optgroup, option");n.each(function(){var e=this.getAttribute("data-option-array-index");a[e].selected=!0}),e.trigger("chosen:updated")})}),document.addEventListener("click",function(e){e.target.matches(".chosen-container .no-results a")&&e.stopPropagation()},!0);var t=$("#search_all");t.typeahead({minLength:2},{displayKey:"name",source:function(e,t){$.get(Routing.generate("search",{q:e}),function(e){t(e)})},templates:{suggestion:function(e){return'<p><i class="fa '+e.icon+'"></i> '+e.name+"</p>"},empty:function(e){return""===e.query?"":'<p class="tt-suggestion">No results found for <strong>'+e.query+"</strong>.</p>"}}}),t.bind("typeahead:selected",function(e,t){location.href=Routing.generate(t.route,{id:t.id})});var n=$("#personAutocomplete"),a=$("#person");n.typeahead({minLength:3},{displayKey:"name",source:function(e,t){$.get(Routing.generate("search",{q:e,type:"person"}),function(e){t(e)})},templates:{suggestion:function(e){return'<p><i class="fa '+e.icon+'"></i> '+e.name+"</p>"},empty:function(e){return""===e.query?'<p class="tt-suggestion">No results found.</p>':'<p class="tt-suggestion">No results found for <strong>'+e.query+"</strong>.</p>"}}}),n.bind("typeahead:selected",function(e,t){a.val(t.id)});var r=$("#participants_search"),i=$("#participants_search_id");if(r.length>0){var o=r.closest("form").data("competition");r.typeahead({minLength:3},{displayKey:"name",source:function(e,t){$.get(Routing.generate("competitions_participants_search",{competition:o,q:e}),function(e){t(e)})},templates:{suggestion:function(e){return"<p>"+e.name+"</p>"},empty:function(e){return""===e.query?'<p class="tt-suggestion">No results found.</p>':'<p class="tt-suggestion">No results found for <strong>'+e.query+"</strong>.</p>"}}}),r.bind("typeahead:selected",function(e,t){i.val(t.id)})}var s=$("[data-unselect]");s.each(function(){var e=$(this),t=$("#"+e.data("unselect"));e.click(function(){t.find("option").attr("selected",!1),t.trigger("chosen:updated")})});var c=$("[data-submit=auto]");c.on("change",function(){this.form.submit()}),$(document).on("change",'.order-license-year input[type="radio"]',function(){var e=$(this).closest("form"),t={},n=$('.order-license-year input[type="radio"]:checked'),a=$('.order-license-age input[type="radio"]:checked');t[n.attr("name")]=n.val(),t[a.attr("name")]=a.val(),$.ajax({url:e.attr("action"),type:e.attr("method"),data:t,complete:function(e){$(".order-license-ajax-target").replaceWith($(e.responseText).find(".order-license-ajax-target")),$(".order-free-license-ajax-target").replaceWith($(e.responseText).find(".order-free-license-ajax-target"))}})}),$(document).on("change",'.order-license-age input[type="radio"]',function(){var e=$(this).closest("form"),t={},n=$('.order-license-year input[type="radio"]:checked'),a=$('.order-license-age input[type="radio"]:checked');t[n.attr("name")]=n.val(),t[a.attr("name")]=a.val(),$.ajax({url:e.attr("action"),type:e.attr("method"),data:t,complete:function(e){$(".order-free-license-ajax-target").replaceWith($(e.responseText).find(".order-free-license-ajax-target"))}})})}(),function(e){"use strict";var t=e(".js-bank-infos"),n=e(".js-payment-form input[type=radio]");n.on("change",function(){var n=e(this).val();"2"===n?(t.removeClass("hide"),e("#invoice-price").show(),e("#credit-card-price").hide(),e("#credit-card-tax-add").hide()):(t.addClass("hide"),e("#invoice-price").hide(),e("#credit-card-price").show(),e("#credit-card-tax-add").show())})}(jQuery),function(e){"use strict";e(".js-modal-file-preview").on("show.bs.modal",function(t){var n=e(t.relatedTarget),a=n.data("download"),r=n.data("title"),i=e(this);i.find(".js-pdf-preview").attr("src",a),i.find(".js-pdf-download").attr("href",a),i.find(".js-pdf-preview-title").text(r)})}(jQuery),function(e){"use strict";0!==e("#js-pdf-preview").length&&e("#js-pdf-preview").height(e(window).height()-280)}(jQuery);var options={};!function(e){"use strict";e("#crop-img").cropper({viewMode:1,aspectRatio:5/7}),e("form#crop_image").submit(function(){var t=e("#crop-img"),n=e(t).data("person"),a=e(t).data("picture");t.cropper("getCroppedCanvas",{width:315,height:440}).toBlob(function(t){var r=new FormData;r.append("croppedImage",t),e.ajax(Routing.generate("person_images_crop_upload",{person:n,picture:a}),{method:"POST",data:r,processData:!1,contentType:!1})})}),e("#person_deceased").change(function(){e("#isDeceased").collapse(e(this).prop("checked")?"show":"hide")})}(jQuery);